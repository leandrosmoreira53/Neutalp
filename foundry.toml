[profile.default]
src = "src"
out = "out"
libs = ["node_modules", "lib/openzeppelin-contracts/lib"]
test = "test"
cache_path = "cache_forge"
# Excluir scripts, testes e bibliotecas problemáticas da compilação
exclude = [
    "script/**",
    "test/**",
    "node_modules/@uniswap/v3-periphery/node_modules/**",
    "node_modules/@uniswap/v3-core/contracts/libraries/**",
    "node_modules/@uniswap/v3-periphery/contracts/**"
]

# Remappings para imports
# Ordem importa: remappings mais específicos primeiro
remappings = [
    # OpenZeppelin - usar versão local
    "@openzeppelin/contracts/=lib/openzeppelin-contracts/contracts/",
    "@openzeppelin/=lib/openzeppelin-contracts/",
    "@chainlink/contracts/=lib/chainlink-brownie-contracts/contracts/",
    "@uniswap/v3-core/contracts/=lib/v3-core/contracts/",
    "@uniswap/v3-periphery/contracts/=lib/v3-periphery/contracts/"
]

# Solidity version
# Usar 0.8.24+ para OpenZeppelin contracts
solc_version = "0.8.24"
via_ir = false

# Optimizer
optimizer = true
optimizer_runs = 200

# EVM version
evm_version = "cancun"

# Verbosity
verbosity = 2

# Gas reports
gas_reports = ["*"]

# Fuzz
[fuzz]
runs = 256
max_test_rejects = 65536

# Invariant
[invariant]
runs = 256
depth = 15
fail_on_revert = true

# RPC endpoints
[rpc_endpoints]
sepolia = "${SEPOLIA_RPC_URL}"
mainnet = "${MAINNET_RPC_URL}"
arbitrum_sepolia = "${ARBITRUM_SEPOLIA_RPC_URL}"
arbitrum_sepolia_public = "https://sepolia-rollup.arbitrum.io/rpc"

# Etherscan (para verificação)
[etherscan]
sepolia = { key = "${ETHERSCAN_API_KEY}" }
mainnet = { key = "${ETHERSCAN_API_KEY}" }
arbitrum_sepolia = { key = "${ARBISCAN_API_KEY}", url = "https://api-sepolia.arbiscan.io/api" }

# Formatter
[fmt]
line_length = 120
tab_width = 4
bracket_spacing = true
